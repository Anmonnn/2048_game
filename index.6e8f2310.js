var e=document.querySelector(".start"),t=document.querySelectorAll(".field-cell"),n=document.querySelector(".message-start"),c=document.querySelector(".message-win"),i=document.querySelector(".message-lose"),l=document.querySelector(".game-score"),o=0,a=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],r=["field-cell--2","field-cell--4","field-cell--8","field-cell--16","field-cell--32","field-cell--64","field-cell--128","field-cell--256","field-cell--512","field-cell--1024","field-cell--2048"];function f(e,t){return Math.floor(Math.random()*(t-e+1))+e}function s(){var e=f(0,t.length-1),n=f(0,t.length-1),c=e%4,i=n%4,l=4*i+c;0===a[i][c]?10===f(1,10)?(t[l].textContent="4",t[l].classList.add("field-cell--4"),a[i][c]=4):(t[l].textContent="2",t[l].classList.add("field-cell--2"),a[i][c]=2):s()}function d(){for(var e=function(e){for(var n=0;n<u[e].length;n++)!function(n){u[e][n]="field-cell--".concat(a[e][n]);var c=4*e+n;r.forEach(function(e){t[c].classList.remove(e)}),t[c].textContent="",0!==a[e][n]&&(t[c].classList.add(u[e][n]),t[c].textContent="".concat(a[e][n])),0===a[e][n]&&(r.forEach(function(e){t[c].classList.remove(e)}),t[c].textContent="")}(n)},n=0;n<u.length;n++)e(n)}e.addEventListener("click",function(){this.classList.contains("start")?(this.textContent="Restart",this.classList.remove("start"),this.classList.add("restart"),n.classList.add("hidden"),s(),s()):(this.textContent="Start",this.classList.remove("restart"),this.classList.add("start"),c.classList.add("hidden"),i.classList.add("hidden"),n.classList.remove("hidden"),t.forEach(function(e){e.textContent="",r.forEach(function(t){e.classList.remove(t)})}),a=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],o=0,l.textContent="".concat(o))});var u=[["field-cell--".concat(0),"field-cell--".concat(0),"field-cell--".concat(0),"field-cell--".concat(0)],["field-cell--".concat(0),"field-cell--".concat(0),"field-cell--".concat(0),"field-cell--".concat(0)],["field-cell--".concat(0),"field-cell--".concat(0),"field-cell--".concat(0),"field-cell--".concat(0)],["field-cell--".concat(0),"field-cell--".concat(0),"field-cell--".concat(0),"field-cell--".concat(0)]];document.addEventListener("keydown",function(t){if(e.classList.contains("restart")&&c.classList.contains("hidden")&&i.classList.contains("hidden")){var n=JSON.parse(JSON.stringify(a)),r=!1;"ArrowUp"===t.key&&(function(){for(var e=3;e>=0;e--){for(var t=[!0,!0,!0,!0],n=3;n>=0;n--){if(3===n&&0!==a[n][e]&&0===a[n-1][e]&&0!==a[n-2][e]&&0===a[n-3][e]){a[n-3][e]=a[n-2][e],a[n-2][e]=a[n][e],a[n-1][e]=0,a[n][e]=0;continue}if(3===n&&0!==a[n][e]&&0!==a[n-1][e]&&0!==a[n-2][e]&&0===a[n-3][e]){a[n-3][e]=a[n-2][e],a[n-2][e]=a[n-1][e],a[n-1][e]=a[n][e],a[n][e]=0;continue}if(n>=2&&0===a[n-2][e]&&0!==a[n-1][e]&&0!==a[n][e]&&a[n][e]!==a[n-1][e]){a[n-2][e]=a[n-1][e],a[n-1][e]=a[n][e],a[n][e]=0;continue}if(n<3&&void 0!==a[n+1][e]&&0!==a[n+1][e]&&0===a[n][e]){a[n][e]=a[n+1][e],a[n+1][e]=0;continue}if(n<3&&void 0!==a[n+1][e]&&0!==a[n+1][e]&&a[n][e]===a[n+1][e]&&!0===t[n]&&!0===t[n+1]){a[n][e]+=a[n][e],a[n+1][e]=0,t[n]=!1,o+=a[n][e];continue}}for(var c=3;c>=0;c--)if(c<3&&void 0!==a[c+1][e]&&0!==a[c+1][e]&&0===a[c][e]){a[c][e]=a[c+1][e],a[c+1][e]=0;continue}}}(),d()),"ArrowDown"===t.key&&(function(){for(var e=0;e<a[0].length;e++){for(var t=[!0,!0,!0,!0],n=0;n<a.length;n++){if(0===n&&0!==a[n][e]&&0===a[n+1][e]&&0!==a[n+2][e]&&0===a[n+3][e]){a[n+3][e]=a[n+2][e],a[n+2][e]=a[n][e],a[n+1][e]=0,a[n][e]=0;continue}if(0===n&&0!==a[n][e]&&0!==a[n+1][e]&&0!==a[n+2][e]&&0===a[n+3][e]){a[n+3][e]=a[n+2][e],a[n+2][e]=a[n+1][e],a[n+1][e]=a[n][e],a[n][e]=0;continue}if(n<2&&0!==a[n][e]&&0!==a[n+1][e]&&0===a[n+2][e]&&a[n][e]!==a[n+1][e]){a[n+2][e]=a[n+1][e],a[n+1][e]=a[n][e],a[n][e]=0;continue}if(n>0&&0===a[n][e]&&0!==a[n-1][e]&&void 0!==a[n-1][e]){a[n][e]=a[n-1][e],a[n-1][e]=0;continue}if(n>0&&0!==a[n-1][e]&&a[n][e]===a[n-1][e]&&void 0!==a[n-1][e]&&!0===t[n]&&!0===t[n-1]){a[n][e]+=a[n][e],a[n-1][e]=0,t[n]=!1,o+=a[n][e];continue}}for(var c=0;c<a.length;c++)if(c>0&&0===a[c][e]&&0!==a[c-1][e]&&void 0!==a[c-1][e]){a[c][e]=a[c-1][e],a[c-1][e]=0;continue}}}(),d()),"ArrowRight"===t.key&&(function(){for(var e=0;e<a.length;e++){for(var t=[!0,!0,!0,!0],n=0;n<a[e].length;n++){if(0!==a[e][n+1]&&0!==a[e][n+2]&&0!==a[e][n]&&0===a[e][n+3]){a[e][n+3]=a[e][n+2],a[e][n+2]=a[e][n+1],a[e][n+1]=a[e][n],a[e][n]=0;continue}if(0!==a[e][n-1]&&void 0!==a[e][n-1]&&a[e][n]!==a[e][n-1]&&0!==a[e][n]&&0===a[e][n+1]){a[e][n+1]=a[e][n],a[e][n]=a[e][n-1],a[e][n-1]=0;continue}if(0===a[e][n]&&0!==a[e][n-1]&&void 0!==a[e][n-1]){a[e][n]=a[e][n-1],a[e][n-1]=0;continue}if(0!==a[e][n-1]&&a[e][n]===a[e][n-1]&&void 0!==a[e][n-1]&&!0===t[n]&&!0===t[n-1]){a[e][n]+=a[e][n],a[e][n-1]=0,t[n]=!1,o+=a[e][n];continue}}for(var c=0;c<a[e].length;c++)if(0===a[e][c]&&0!==a[e][c-1]&&void 0!==a[e][c-1]){a[e][c]=a[e][c-1],a[e][c-1]=0;continue}}}(),d()),"ArrowLeft"===t.key&&(function(){for(var e=a.length-1;e>=0;e--){for(var t=[!0,!0,!0,!0],n=a[e].length-1;n>=0;n--){if(0!==a[e][n-1]&&0!==a[e][n-2]&&0!==a[e][n]&&0===a[e][n-3]){a[e][n-3]=a[e][n-2],a[e][n-2]=a[e][n-1],a[e][n-1]=a[e][n],a[e][n]=0;continue}if(0!==a[e][n+1]&&void 0!==a[e][n+1]&&a[e][n]!==a[e][n-1]&&0!==a[e][n]&&0===a[e][n-1]){a[e][n-1]=a[e][n],a[e][n]=a[e][n+1],a[e][n+1]=0;continue}if(0===a[e][n]&&0!==a[e][n+1]&&void 0!==a[e][n+1]){a[e][n]=a[e][n+1],a[e][n+1]=0;continue}if(0!==a[e][n+1]&&a[e][n]===a[e][n+1]&&void 0!==a[e][n+1]&&!0===t[n]&&!0===t[n+1]){a[e][n]+=a[e][n],a[e][n+1]=0,t[n]=!1,o+=a[e][n];continue}}for(var c=a[e].length-1;c>=0;c--)if(0===a[e][c]&&0!==a[e][c+1]&&void 0!==a[e][c+1]){a[e][c]=a[e][c+1],a[e][c+1]=0;continue}}}(),d()),function(){for(var e=0;e<a.length;e++)for(var t=0;t<a[e].length;t++)2048===a[e][t]&&c.classList.remove("hidden")}(),function(){for(var e=!1,t=0;t<a.length;t++)for(var n=0;n<a[t].length;n++)(a[t][n]===a[t][n+1]||a[t][n]===a[t][n-1]||0===a[t][n-1]||0===a[t][n+1])&&(e=!0);for(var c=0;c<a[0].length;c++)for(var l=0;l<a.length;l++)(l<3&&a[l][c]===a[l+1][c]||l>0&&a[l][c]===a[l-1][c]||l>0&&0===a[l-1][c]||l<3&&0===a[l+1][c])&&(e=!0);e||i.classList.remove("hidden")}();for(var f=0;f<a.length;f++)for(var u=0;u<a[f].length;u++)a[f][u]!==n[f][u]&&(r=!0);r&&s(),l.textContent="".concat(o)}});
//# sourceMappingURL=index.6e8f2310.js.map
